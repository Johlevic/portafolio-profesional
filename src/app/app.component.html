@if (isLoading) {
  <app-skeleton-loader></app-skeleton-loader>
} @else {
  <div
    class="flex flex-col md:flex-row min-h-screen bg-gray-50 dark:bg-gray-900 overflow-x-hidden transition-colors duration-300"
  >
    <app-header [showProfile]="showProfileInfo"></app-header>

    <main
      class="flex-1 md:ml-24 lg:ml-72 transition-all duration-500 w-full pt-20 md:pt-0 animate-fade-in"
      [class.md:pt-28]="!isHome"
    >
      <div class="min-h-[calc(100vh-80px)]">
        <router-outlet></router-outlet>
      </div>

      <app-footer></app-footer>
    </main>

    <!-- Theme & Language Controls (Desktop Only) -->
    <div
      class="hidden md:flex fixed top-0 right-0 left-0 md:left-24 lg:left-72 z-[9998] items-center justify-end px-6 py-4 transition-all duration-500"
      [ngClass]="{
        'bg-white/90 dark:bg-gray-900/90 backdrop-blur-md shadow-sm h-20':
          isScrolled,
        'h-24 bg-transparent': !isScrolled,
      }"
    >
      <!-- Controls Pill -->
      <div
        class="flex items-center rounded-full bg-white/80 dark:bg-gray-900/80 backdrop-blur-md shadow-lg border border-gray-200 dark:border-gray-700/50 transition-all duration-500 p-1.5"
      >
        <!-- Dynamic Profile Info (Expandable) -->
        <div
          class="overflow-hidden transition-all duration-500 ease-in-out flex items-center"
          [style.max-width]="showProfileInfo ? '200px' : '0px'"
          [style.opacity]="showProfileInfo ? '1' : '0'"
          [style.margin-left]="showProfileInfo ? '8px' : '0px'"
          [style.margin-right]="showProfileInfo ? '8px' : '0px'"
        >
          <div class="flex items-center gap-3 min-w-max">
            <span
              class="font-['Orbitron'] font-bold text-gray-800 dark:text-white text-sm"
            >
              Jhony Lezama
            </span>
            <img
              src="assets/img/perfil.jpg"
              alt="Profile"
              class="w-8 h-8 rounded-full border border-blue-500 object-cover shadow-sm"
            />
          </div>
        </div>

        <!-- Controls -->
        <div class="flex items-center gap-2">
          <app-language-selector></app-language-selector>
          <app-theme-toggle></app-theme-toggle>
        </div>
      </div>
    </div>

    <!-- Scroll to Top (Mobile Only) -->
    <button
      *ngIf="isScrolled"
      (click)="scrollToTop()"
      class="md:hidden fixed bottom-6 right-6 z-[9999] w-12 h-12 flex items-center justify-center rounded-full bg-blue-600/90 text-white shadow-lg backdrop-blur-md border border-white/20 active:scale-95 transition-all duration-300 animate-fade-in"
      aria-label="Volver arriba"
    >
      <i class="bi bi-arrow-up text-2xl"></i>
    </button>
  </div>
}
